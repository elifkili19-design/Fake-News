<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="A refined truth-verification experience with improved UX, accessibility, theme persistence, and a compact in-page game engine." />
  <title>VERACITY LAB â€¢ Truth Analysis System</title>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=IBM+Plex+Mono:wght@400;500&family=Playfair+Display:wght@400;500&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âœ“</text></svg>">

  <style>
    :root{--paper:#FAF9F7;--paper-dark:#F5F4F2;--ink:#2C2C2C;--ink-light:#5A5A5A;--teak:#B38B6D;--olive:#8A9A5B;--terracotta:#C77966;--stone:#E8E6E1;--shadow:rgba(44,44,44,.08);--shadow-heavy:rgba(44,44,44,.15);--transition:.25s cubic-bezier(.4,0,.2,1);}
    [data-theme="dark"]{--paper:#0f0f0f;--paper-dark:#1b1b1b;--ink:#f3f3f3;--ink-light:#bfbfbf;--teak:#9C7D65;--olive:#7A8A4B;--terracotta:#B56956;--stone:#2e2e2e;--shadow:rgba(0,0,0,.28);--shadow-heavy:rgba(0,0,0,.4);}
    [data-theme="sepia"]{--paper:#F8F1E5;--paper-dark:#F0E9DD;--ink:#3A3429;--ink-light:#6A6459;--teak:#A67C52;--olive:#7D8A4B;--terracotta:#B56656;--stone:#E6E0D4;}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{background:linear-gradient(135deg,var(--paper),var(--paper-dark));color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;line-height:1.6;margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem;transition:background var(--transition),color var(--transition);}
    .app{width:100%;max-width:1000px}
    .card{background:var(--paper);border:1px solid var(--stone);border-radius:12px;padding:2rem;margin-bottom:1.25rem;box-shadow:0 18px 40px var(--shadow);transition:transform var(--transition),box-shadow var(--transition)}
    header.main{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}
    .brand{font-family:'Playfair Display',serif;font-size:1.6rem;color:var(--ink)}
    .brand span{color:var(--teak)}
    nav .tabs{display:flex;gap:1rem;align-items:center}
    .tab{background:none;border:0;padding:.5rem .75rem;border-radius:8px;color:var(--ink-light);cursor:pointer}
    .tab[aria-current="true"]{color:var(--teak);background:rgba(179,139,109,0.05);border:1px solid rgba(179,139,109,0.08)}
    .controls{display:flex;gap:.5rem;align-items:center}
    button.theme-toggle{width:40px;height:40px;border-radius:8px;border:1px solid var(--stone);background:var(--paper);cursor:pointer;color:var(--ink-light)}
    button.start{background:linear-gradient(135deg,var(--teak),var(--olive));color:white;padding:.8rem 1.2rem;border-radius:8px;border:0;cursor:pointer}
    button.start:focus,button:focus{outline:3px solid rgba(0,0,0,.06)}
    main{display:grid;grid-template-columns:1fr 360px;gap:1rem;align-items:start}
    @media(max-width:880px){main{grid-template-columns:1fr} .sidebar{order:2}}

    /* GAME AREA */
    .game-area .headline{font-family:'Playfair Display',serif;font-size:1.6rem;margin-bottom:1rem;color:var(--ink)}
    .meta{color:var(--ink-light);font-size:.95rem;margin-bottom:1rem}
    .panel{background:var(--paper-dark);border:1px solid var(--stone);padding:1rem;border-radius:10px}
    .progress-wrap{margin:1rem 0}
    .progress{height:8px;background:var(--stone);border-radius:8px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--teak),var(--olive));width:0%;transition:width .6s cubic-bezier(.34,1.56,.64,1)}
    .timer{height:6px;background:linear-gradient(90deg,var(--olive),var(--terracotta));width:100%;border-radius:6px;transition:width .15s linear}
    .decision{display:flex;gap:.75rem;margin-top:1rem}
    button.decision{flex:1;padding:.9rem;border-radius:8px;border:2px solid transparent;background:var(--paper);font-weight:700;cursor:pointer}
    button.decision.true{border-color:var(--olive);color:var(--olive)}
    button.decision.false{border-color:var(--terracotta);color:var(--terracotta)}
    button.hint{background:transparent;border:1px dashed var(--stone);padding:.6rem;border-radius:8px;cursor:pointer}
    .log{max-height:280px;overflow:auto;font-family:'IBM Plex Mono',monospace;font-size:.95rem;color:var(--ink-light)}
    .stat{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px dashed var(--stone)}
    .badges{display:flex;gap:.5rem;flex-wrap:wrap}

    /* results */
    .results{display:none;padding:1rem;text-align:center}
    .results.show{display:block}
    .score{font-size:2.4rem;font-weight:700;color:var(--teak)}

    /* small helpers */
    .muted{color:var(--ink-light);font-size:.95rem}
    a.inline{color:var(--teak);text-decoration:none}
    footer{margin-top:1rem;text-align:center;color:var(--ink-light);font-size:.9rem}
  </style>
</head>
<body>
  <div class="app" id="app">
    <div class="card">
      <header class="main">
        <div class="brand">VERACITY <span>LAB</span></div>
        <div class="controls">
          <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">ðŸŒ“</button>
          <button class="start" id="openSetup">Start</button>
        </div>
      </header>
      <main>
        <section class="game-area">
          <div class="panel" id="setupPanel">
            <h2 class="muted">Quick setup</h2>
            <div style="display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.5rem">
              <label class="muted">Rounds
                <select id="rounds" aria-label="Rounds per game">
                  <option>5</option>
                  <option selected>8</option>
                  <option>12</option>
                </select>
              </label>
              <label class="muted">Difficulty
                <select id="difficulty" aria-label="Difficulty">
                  <option value="easy">Easy</option>
                  <option value="medium" selected>Medium</option>
                  <option value="hard">Hard</option>
                </select>
              </label>
              <label class="muted">Hints (cost points)
                <select id="hints" aria-label="Hint allowance">
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2" selected>2</option>
                </select>
              </label>
            </div>
            <p class="muted" style="margin-top:1rem">A fast, focused round. Decide if a headline is TRUE or FALSE before the timer ends. Hints cost points but reveal context.</p>
            <div style="display:flex;gap:.5rem;margin-top:1rem">
              <button class="start" id="startGame">Begin</button>
              <button class="hint muted" id="openRules">Show rules</button>
            </div>
          </div>

          <div class="panel" id="playPanel" style="display:none" aria-live="polite">
            <div class="meta"><span id="progressLabel">Round 0 / 0</span> Â· <span id="scoreLabel">Score: 0</span></div>
            <div class="headline" id="headlineText">Ready?</div>
            <div class="meta" id="headlineMeta">Source: <span id="headlineSource">â€”</span></div>

            <div class="progress-wrap">
              <div class="progress"><i id="progressFill"></i></div>
              <div class="progress" style="margin-top:.5rem;height:6px;background:transparent;border:1px solid var(--stone);">
                <div class="timer" id="timerBar" style="width:100%"></div>
              </div>
            </div>

            <div class="decision">
              <button class="decision true" id="btnTrue" aria-label="Mark true">True</button>
              <button class="decision false" id="btnFalse" aria-label="Mark false">False</button>
              <button class="hint" id="btnHint">Hint (<span id="hintCost">-2</span>)</button>
            </div>

            <div class="log panel" style="margin-top:1rem">
              <div class="muted">Round log</div>
              <div class="log" id="logArea" aria-live="polite"></div>
            </div>

            <div class="results" id="resultsPanel">
              <div class="score" id="finalScore">0</div>
              <div class="muted" id="finalMessage">â€”</div>
              <div style="margin-top:1rem"><button class="start" id="playAgain">Play again</button></div>
            </div>
          </div>
        </section>

        <aside class="sidebar">
          <div class="panel card">
            <h3 class="muted">Live stats</h3>
            <div class="stat"><div>Rounds played</div><div id="totalPlayed">0</div></div>
            <div class="stat"><div>Best score</div><div id="bestScore">0</div></div>
            <div class="stat"><div>Current streak</div><div id="streak">0</div></div>
            <div style="margin-top:.75rem" class="muted">Badges</div>
            <div class="badges" id="badgesArea"></div>
          </div>

          <div class="panel card" style="margin-top:1rem">
            <h4 class="muted">About</h4>
            <p class="muted">A lightweight fact-checking game. This prototype includes a curated sample dataset and stores progress locally. Replace the dataset with your API or CSV later.</p>
            <p class="muted">Keyboard: T = True, F = False, H = Hint, Space = Next</p>
          </div>
        </aside>
      </main>
    </div>
    <footer>Made with care â€” Veracity Lab Â· <a class="inline" href="https://github.com/elifkili19-design/Fake-News">Source</a></footer>
  </div>

  <script>
    // Small, robust in-page game engine with persistence and accessibility
    (function(){
      const sampleHeadlines = [
        {text:'New study shows daily coffee linked to increased lifespan',source:'Science Daily',truth:true,context:'Observational study; correlation not causation.'},
        {text:'Local council approves ban on plastic bags next month',source:'City Herald',truth:false,context:'Council discussed policy but no vote yet.'},
        {text:'Breakthrough battery doubles EV range in tests',source:'TechWire',truth:false,context:'Prototype tests only; exaggerated headline.'},
        {text:'Community garden feeds 500 families this season',source:'Neighborhood News',truth:true,context:'Verified via local food bank report.'},
        {text:'Celebrity endorses miracle weight-loss pill',source:'ClickDaily',truth:false,context:'No medical endorsement; clickbait site.'},
        {text:'Historic heatwave sets new national temperature record',source:'National Weather',truth:true,context:'Official meteorological data confirms record.'},
        {text:'Company X to give all employees 6 months paid leave',source:'ViralPost',truth:false,context:'Satire site announced policy as joke.'},
        {text:'New traffic lights planned to reduce accidents',source:'Council Minutes',truth:true,context:'Budget allocated in minutes.'},
        {text:'Scientists reverse aging in mice using compound Y',source:'BioNews',truth:true,context:'Published peer-reviewed study in controlled conditions.'},
        {text:'Miracle cure for diabetes discovered in remote village',source:'HealthBuzz',truth:false,context:'No clinical trials; anecdotal claims.'}
      ];

      // State
      const state = {rounds:8, difficulty:'medium', hints:2, index:0, score:0, total:0, running:false, usedHints:0};
      // Elements
      const els = {rounds:document.getElementById('rounds'),difficulty:document.getElementById('difficulty'),hints:document.getElementById('hints'),startGame:document.getElementById('startGame'),openSetup:document.getElementById('openSetup'),setupPanel:document.getElementById('setupPanel'),playPanel:document.getElementById('playPanel'),headlineText:document.getElementById('headlineText'),headlineSource:document.getElementById('headlineSource'),progressLabel:document.getElementById('progressLabel'),progressFill:document.getElementById('progressFill'),timerBar:document.getElementById('timerBar'),btnTrue:document.getElementById('btnTrue'),btnFalse:document.getElementById('btnFalse'),btnHint:document.getElementById('btnHint'),logArea:document.getElementById('logArea'),scoreLabel:document.getElementById('scoreLabel'),resultsPanel:document.getElementById('resultsPanel'),finalScore:document.getElementById('finalScore'),finalMessage:document.getElementById('finalMessage'),playAgain:document.getElementById('playAgain'),hintCost:document.getElementById('hintCost'),totalPlayed:document.getElementById('totalPlayed'),bestScore:document.getElementById('bestScore'),streak:document.getElementById('streak'),badgesArea:document.getElementById('badgesArea')};

      // Theme
      const themeToggle = document.getElementById('themeToggle');
      function applyTheme(t){document.documentElement.setAttribute('data-theme',t);localStorage.setItem('veracity:theme',t);}
      const savedTheme = localStorage.getItem('veracity:theme')||'light';if(savedTheme!=='light')applyTheme(savedTheme);
      themeToggle.addEventListener('click',()=>{const cur=document.documentElement.getAttribute('data-theme')||'light';const next = cur==='light'? 'dark' : cur==='dark' ? 'sepia' : 'light';applyTheme(next);themeToggle.textContent = next==='dark'? 'ðŸŒ™' : next==='sepia'? 'ðŸŸ¤' : 'ðŸŒ“';});

      // Initialize from storage
      const storage = {played:parseInt(localStorage.getItem('veracity:played')||'0',10),best:parseInt(localStorage.getItem('veracity:best')||'0',10),streak:parseInt(localStorage.getItem('veracity:streak')||'0',10)};
      function renderStats(){els.totalPlayed.textContent = storage.played;els.bestScore.textContent = storage.best;els.streak.textContent = storage.streak;els.badgesArea.innerHTML = ''; if(storage.best>=80)els.badgesArea.appendChild(makeBadge('Sharpshooter')); if(storage.played>=10)els.badgesArea.appendChild(makeBadge('Experienced'))}function makeBadge(text){const b=document.createElement('div');b.className='muted';b.style.padding='4px 8px';b.style.border='1px solid var(--stone)';b.style.borderRadius='999px';b.textContent=text;return b;}renderStats();

      // Utility
      function shuffle(arr){return arr.slice().sort(()=>Math.random()-0.5)}

      // Game flow
      function start(){state.rounds = parseInt(els.rounds.value,10);state.difficulty=els.difficulty.value;state.hints=parseInt(els.hints.value,10);state.index=0;state.score=0;state.total=state.rounds;state.running=true;state.usedHints=0;state.deck = pickDeck(state.rounds);els.setupPanel.style.display='none';els.playPanel.style.display='block';els.resultsPanel.classList.remove('show');updateUI();next();}
      function pickDeck(n){const pool = shuffle(sampleHeadlines); if(n<=pool.length)return pool.slice(0,n); // if more requested, loop
        const out = []; while(out.length<n) out.push(pool[out.length%pool.length]); return out}

      function updateUI(){els.scoreLabel.textContent = `Score: ${state.score}`;els.progressLabel.textContent = `Round ${Math.min(state.index+1,state.total)} / ${state.total}`;const pct = Math.round((state.index/state.total)*100);els.progressFill.style.width = pct+'%';els.hintCost.textContent = state.difficulty==='hard' ? '-3' : '-2';}

      // Timer
      let timerId=null;let timeLeft=0;function setTimer(){clearInterval(timerId);const base = state.difficulty==='easy'?10:state.difficulty==='medium'?8:6;timeLeft = base;els.timerBar.style.width = '100%';timerId=setInterval(()=>{timeLeft-=0.1;const w=Math.max(0,(timeLeft/base)*100);els.timerBar.style.width = w+'%';if(timeLeft<=0){clearInterval(timerId);onAnswer(null)}},100);}function stopTimer(){clearInterval(timerId);}

      function next(){if(state.index>=state.total){end();return}const item = state.deck[state.index];els.headlineText.textContent = item.text;els.headlineSource.textContent = item.source;els.logArea.insertAdjacentHTML('afterbegin',`<div style="padding:.25rem 0;color:var(--ink-light)"><strong>Round ${state.index+1}</strong>: presented</div>`);updateUI();setTimer();}

      function onAnswer(choice){ // true/false/null for timeout
        stopTimer();const item = state.deck[state.index];const correct = item.truth;let delta=0;let note='';if(choice===null){note='Timeout';delta = state.difficulty==='hard'?-2:-1} else if(choice===correct){note='Correct';delta = state.difficulty==='hard'?10:8}else{note='Wrong';delta = state.difficulty==='hard'?-5:-3}state.score += delta;state.score = Math.max(0,Math.round(state.score));const row = document.createElement('div');row.style.padding='.25rem 0';row.style.borderTop='1px dashed var(--stone)';row.innerHTML = `<div><strong>Round ${state.index+1} â€” ${note}</strong></div><div style="font-size:.9rem;color:var(--ink-light)">${item.context}</div>`;els.logArea.prepend(row);state.index++;updateUI();setTimeout(()=>{next()},700);} 

      function useHint(){if(state.usedHints>=state.hints)return;const cost = state.difficulty==='hard'?3:2;state.usedHints++;state.score = Math.max(0,state.score - cost);const item = state.deck[state.index];els.logArea.insertAdjacentHTML('afterbegin',`<div style="padding:.25rem 0;color:var(--teak)"><strong>Hint:</strong> ${item.context}</div>`);updateUI();}

      function end(){state.running=false;stopTimer();els.resultsPanel.classList.add('show');els.finalScore.textContent = state.score;els.finalMessage.textContent = state.score>=Math.round(state.total*6)? 'Excellent discernment' : state.score>=Math.round(state.total*4)? 'Solid skills' : 'Practice more fact-checking!';// persist
        storage.played += 1;storage.best = Math.max(storage.best,state.score);storage.streak = state.score>=Math.round(state.total*4)? storage.streak+1 : 0;localStorage.setItem('veracity:played',storage.played);localStorage.setItem('veracity:best',storage.best);localStorage.setItem('veracity:streak',storage.streak);renderStats();}

      // Events
      els.startGame.addEventListener('click',start);els.openSetup.addEventListener('click',()=>{els.setupPanel.style.display='';els.playPanel.style.display='none'});els.btnTrue.addEventListener('click',()=>onAnswer(true));els.btnFalse.addEventListener('click',()=>onAnswer(false));els.btnHint.addEventListener('click',useHint);els.playAgain.addEventListener('click',()=>{els.setupPanel.style.display='';els.playPanel.style.display='none';els.logArea.innerHTML='';});

      // Keyboard support
      window.addEventListener('keydown',e=>{if(!state.running && (e.key===' '||e.key==='Enter')){start();} if(e.key.toLowerCase()==='t')onAnswer(true); if(e.key.toLowerCase()==='f')onAnswer(false); if(e.key.toLowerCase()==='h')useHint(); if(e.key===' ' && state.running){/* consume space to avoid page scroll */ e.preventDefault();}});

      // Expose a small debug api (safe)
      window.Veracity = {start, state};
    })();
  </script>
</body>
</html>